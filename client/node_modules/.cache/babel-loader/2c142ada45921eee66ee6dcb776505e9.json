{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Documents/Spring2022/CIS450/NCVS550/client/src/pages/Visualization.js\";\nimport React from 'react';\nimport Plot from 'react-plotly.js';\nimport { Form, FormInput, FormGroup, Button, Card, CardBody, CardTitle, Progress } from \"shards-react\";\nimport { FlexibleXYPlot, XAxis, YAxis, VerticalGridLines, HorizontalGridLines, VerticalBarSeries, VerticalBarSeriesCanvas, DiscreteColorLegend } from 'react-vis';\nimport { format } from 'd3-format';\nimport MenuBar from '../components/MenuBar';\nimport { Table, Pagination, Row, Col, Divider } from 'antd';\nimport { getVisualization1 } from '../fetcher';\nimport { getVisualization2 } from '../fetcher';\nimport { getVisualization4 } from '../fetcher';\nimport { getVisualization5 } from '../fetcher';\nimport { relJobVictim } from '../fetcher';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Column,\n  ColumnGroup\n} = Table;\nconst wideFormat = format('.3r');\n\nclass VisualizationPage extends React.Component {\n  constructor(props) {\n    super(props); //initial states setup\n\n    this.state = {\n      useCanvas: false,\n      visualization1Results: [],\n      visualization2Results: [],\n      visualization3Results: [],\n      visualization4Results: [],\n      visualization5Results: []\n    };\n  }\n\n  componentDidMount() {\n    getVisualization1().then(res => {\n      this.setState({\n        visualization1Results: res.results\n      });\n    });\n    getVisualization2().then(res => {\n      this.setState({\n        visualization2Results: res.results\n      });\n    });\n    relJobVictim().then(res => {\n      this.setState({\n        visualization3Results: res.results\n      });\n    });\n    getVisualization4().then(res => {\n      this.setState({\n        visualization4Results: res.results\n      });\n    });\n    getVisualization5().then(res => {\n      this.setState({\n        visualization5Results: res.results\n      });\n    });\n  }\n\n  render() {\n    const {\n      useCanvas\n    } = this.state;\n    const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\n    var array = [];\n    var xValues = [];\n    var t1 = [];\n    var t2 = [];\n    var t3 = [];\n    var t4 = [];\n\n    for (var i = 0; i < this.state.visualization1Results.length; i++) {\n      var item = this.state.visualization1Results[i];\n      xValues.push(item.Income_bracket);\n      t1.push(item.Weapon_involved);\n      t2.push(item.No_weapon_involved);\n      t3.push(item.Do_not_know);\n      t4.push(item.Others);\n    }\n\n    var trace1 = {\n      x: xValues,\n      y: t1,\n      name: 'weapon involved',\n      type: 'bar'\n    };\n    var trace2 = {\n      x: xValues,\n      y: t2,\n      name: 'No weapon involved',\n      type: 'bar'\n    };\n    var trace3 = {\n      x: xValues,\n      y: t3,\n      name: 'Do not know',\n      type: 'bar'\n    };\n    var trace4 = {\n      x: xValues,\n      y: t4,\n      name: 'Other',\n      type: 'bar'\n    };\n    var years = [];\n    var prop = [];\n\n    for (var i = 0; i < this.state.visualization3Results.length; i++) {\n      var item = this.state.visualization3Results[i];\n      years.push(item.Year);\n      prop.push(item.Proportion);\n    }\n\n    var propTrace = {\n      x: years,\n      y: prop,\n      type: 'scatter'\n    };\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var crimes = [];\n    var months = [];\n\n    for (var i = 0; i < this.state.visualization2Results.length; i++) {\n      var item = this.state.visualization2Results[i];\n      crimes.push(item.crime.replaceAll(\"_\", \" \"));\n      months.push(monthNames[item.Max_month - 1]);\n    }\n\n    const values = [crimes, months];\n    const headers = [[\"<b> Crime </b>\"], [\"<b>  Month </b>\"]];\n    const data = [{\n      type: \"table\",\n      header: {\n        values: headers,\n        align: \"center\"\n      },\n      cells: {\n        values: values,\n        align: \"center\"\n      }\n    }];\n    var crimeNums = [];\n    var month4 = [];\n    var year4 = [];\n\n    for (var i = 0; i < this.state.visualization4Results.length; i++) {\n      var item = this.state.visualization4Results[i];\n      crimeNums.push(item.max_crime);\n      month4.push(monthNames[item.Month - 1]);\n      year4.push(item.YEAR);\n    }\n\n    const headers2 = [[\"<b> Year </b>\"], [\"<b>  Month </b>\"], [\"<b>  Crimes in Month </b>\"]];\n    const data2 = [{\n      type: \"table\",\n      header: {\n        values: headers2,\n        align: \"center\"\n      },\n      cells: {\n        values: [year4, month4, crimeNums],\n        align: \"center\"\n      }\n    }];\n    var dates = [];\n    var polInv75 = [];\n    var polInv50to75 = [];\n    var polInv20to25 = [];\n    var polInv10to13 = [];\n\n    for (var i = 0; i < this.state.visualization5Results.length; i++) {\n      var item = this.state.visualization5Results[i];\n      var involvation = item.police_involved / (item.police_involved + item.police_not_involved);\n\n      switch (item.Income) {\n        case \"$75,000 and over\":\n          dates.push(new Date(item.Year, item.Month, 1));\n          polInv75.push(involvation);\n          break;\n\n        case \"$50,000 to $74,999\":\n          polInv50to75.push(involvation);\n          break;\n\n        case \"$20,000 to $24,999\":\n          polInv20to25.push(involvation);\n          break;\n\n        case \"$10,000 to $12,499\":\n          polInv10to13.push(involvation);\n          break;\n      }\n    }\n\n    var trace6 = {\n      x: dates,\n      y: polInv75,\n      name: \"$75,000 and over\",\n      mode: 'markers',\n      type: 'scatter'\n    };\n    var trace7 = {\n      x: dates,\n      y: polInv50to75,\n      name: \"$50,000 to $74,999\",\n      mode: 'markers',\n      type: 'scatter'\n    };\n    var trace8 = {\n      x: dates,\n      y: polInv20to25,\n      name: \"$20,000 to $24,999\",\n      mode: 'markers',\n      type: 'scatter'\n    };\n    var trace9 = {\n      x: dates,\n      y: polInv10to13,\n      name: \"$10,000 to $12,499\",\n      mode: 'markers',\n      type: 'scatter'\n    }; // var trace7 = {\n    //     x: dates,\n    //     y: polNotInv,\n    //     name: 'Police Not Involved',\n    //     type: 'bar'\n    // };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(MenuBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: [trace1, trace2, trace3, trace4],\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Weapon Use by Income Bracket',\n            barmode: \"stack\",\n            yaxis: {\n              automargin: true\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: [propTrace],\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Proportion of Criminals Unemployed',\n            yaxis: {\n              automargin: true\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: data,\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Month Where Specific Crimes are Committed Most'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: data2,\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Months per Year with Most Crimes'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: [trace6, trace7, trace8, trace9],\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Police Involvation Rate over Time'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default VisualizationPage;","map":{"version":3,"sources":["/Users/apple/Documents/Spring2022/CIS450/NCVS550/client/src/pages/Visualization.js"],"names":["React","Plot","Form","FormInput","FormGroup","Button","Card","CardBody","CardTitle","Progress","FlexibleXYPlot","XAxis","YAxis","VerticalGridLines","HorizontalGridLines","VerticalBarSeries","VerticalBarSeriesCanvas","DiscreteColorLegend","format","MenuBar","Table","Pagination","Row","Col","Divider","getVisualization1","getVisualization2","getVisualization4","getVisualization5","relJobVictim","Column","ColumnGroup","wideFormat","VisualizationPage","Component","constructor","props","state","useCanvas","visualization1Results","visualization2Results","visualization3Results","visualization4Results","visualization5Results","componentDidMount","then","res","setState","results","render","BarSeries","array","xValues","t1","t2","t3","t4","i","length","item","push","Income_bracket","Weapon_involved","No_weapon_involved","Do_not_know","Others","trace1","x","y","name","type","trace2","trace3","trace4","years","prop","Year","Proportion","propTrace","monthNames","crimes","months","crime","replaceAll","Max_month","values","headers","data","header","align","cells","crimeNums","month4","year4","max_crime","Month","YEAR","headers2","data2","dates","polInv75","polInv50to75","polInv20to25","polInv10to13","involvation","police_involved","police_not_involved","Income","Date","trace6","mode","trace7","trace8","trace9","width","height","title","barmode","yaxis","automargin"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Plot from 'react-plotly.js';\nimport { Form, FormInput, FormGroup, Button, Card, CardBody, CardTitle, Progress } from \"shards-react\";\n\n\nimport {\n    FlexibleXYPlot,\n    XAxis,\n    YAxis,\n    VerticalGridLines,\n    HorizontalGridLines,\n    VerticalBarSeries,\n    VerticalBarSeriesCanvas,\n    DiscreteColorLegend\n  } from 'react-vis';\n\nimport { format } from 'd3-format';\nimport MenuBar from '../components/MenuBar';\n\n\nimport {\n    Table,\n    Pagination,\n    Row,\n    Col,\n    Divider,\n\n} from 'antd'\n\nimport { getVisualization1 } from '../fetcher'\nimport { getVisualization2 } from '../fetcher'\nimport { getVisualization4 } from '../fetcher'\nimport { getVisualization5 } from '../fetcher'\nimport { relJobVictim } from '../fetcher'\n\n\nconst { Column, ColumnGroup } = Table;\nconst wideFormat = format('.3r');\n\n\nclass VisualizationPage extends React.Component {\n    constructor(props) {\n        super(props)\n        //initial states setup\n        this.state = {\n            useCanvas : false,\n            visualization1Results: [],\n            visualization2Results: [],\n            visualization3Results: [],\n            visualization4Results: [],\n            visualization5Results: []\n\n        }\n\n    }\n\n    componentDidMount() {\n        getVisualization1().then(res => {\n            this.setState({ visualization1Results: res.results })\n        })\n        getVisualization2().then(res => {\n            this.setState({ visualization2Results: res.results })\n        })\n        relJobVictim().then(res => {\n            this.setState({ visualization3Results: res.results })\n        })\n        getVisualization4().then(res => {\n            this.setState({ visualization4Results: res.results })\n        })\n        getVisualization5().then(res => {\n            this.setState({ visualization5Results: res.results })\n        })\n        \n    }\n\n\n    render() {\n        \n\n        const {useCanvas} = this.state;\n        const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\n        var array = [];\n\n        var xValues = [];\n        var t1 = [];\n        var t2 = [];\n        var t3 = [];\n        var t4 = [];\n        \n        for (var i = 0; i < this.state.visualization1Results.length; i++) {\n            var item = this.state.visualization1Results[i];\n            xValues.push(item.Income_bracket);\n            t1.push(item.Weapon_involved);\n            t2.push(item.No_weapon_involved);\n            t3.push(item.Do_not_know);\n            t4.push(item.Others);\n        }\n\n        var trace1 = {\n            x:xValues,\n            y: t1,\n            name: 'weapon involved',\n            type: 'bar'\n        } ;\n\n        var trace2 = {\n            x:xValues,\n            y: t2,\n            name: 'No weapon involved',\n            type: 'bar'\n        };\n\n        var trace3 = {\n            x:xValues,\n            y: t3,\n            name: 'Do not know',\n            type: 'bar'\n        };\n\n        var trace4 = {\n            x: xValues,\n            y: t4,\n            name: 'Other',\n            type: 'bar'\n        };\n\n        var years = [];\n        var prop = [];\n        \n        for (var i = 0; i < this.state.visualization3Results.length; i++) {\n            var item = this.state.visualization3Results[i];\n            years.push(item.Year);\n            prop.push(item.Proportion);\n        }\n\n        var propTrace = {\n            x: years,\n            y: prop,\n            type: 'scatter'\n        };\n\n        const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n        \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ];\n\n\n        var crimes = [];\n        var months = [];\n\n        for (var i = 0; i < this.state.visualization2Results.length; i++) {\n            var item = this.state.visualization2Results[i];\n            crimes.push((item.crime).replaceAll(\"_\", \" \"));\n            months.push(monthNames[item.Max_month - 1]);\n        }\n\n        const values = [\n            crimes,\n            months,\n        ];\n\n        const headers = [[\"<b> Crime </b>\"], [\"<b>  Month </b>\"]];\n        const data = [\n            {\n            type: \"table\",\n            header: {\n                values: headers,\n                align: \"center\",\n            },\n            cells: {\n                values: values,\n                align: \"center\",\n            },\n            },\n        ];\n\n\n        var crimeNums = [];\n        var month4 = [];\n        var year4 = [];\n\n        for (var i = 0; i < this.state.visualization4Results.length; i++) {\n            var item = this.state.visualization4Results[i];\n            crimeNums.push(item.max_crime);\n            month4.push(monthNames[item.Month - 1]);\n            year4.push(item.YEAR);\n        }\n\n        const headers2 = [[\"<b> Year </b>\"], [\"<b>  Month </b>\"], [\"<b>  Crimes in Month </b>\"]];\n        const data2 = [\n            {\n            type: \"table\",\n            header: {\n                values: headers2,\n                align: \"center\",\n            },\n            cells: {\n                values: [year4, month4, crimeNums],\n                align: \"center\",\n            },\n            },\n        ];\n        var dates = [];\n        var polInv75 = [];\n        var polInv50to75 = [];\n        var polInv20to25 = [];\n        var polInv10to13 = [];\n        \n        for (var i = 0; i < this.state.visualization5Results.length; i++) {\n            var item = this.state.visualization5Results[i];\n            \n            var involvation = item.police_involved / (item.police_involved + item.police_not_involved);\n            switch(item.Income) {\n                case \"$75,000 and over\":\n                    dates.push(new Date(item.Year, item.Month, 1));\n                    polInv75.push(involvation);\n                    break;\n                case \"$50,000 to $74,999\":\n                    polInv50to75.push(involvation);\n                    break;\n                case \"$20,000 to $24,999\":\n                    polInv20to25.push(involvation);\n                    break;\n                case \"$10,000 to $12,499\":\n                    polInv10to13.push(involvation);\n                    break;\n            }\n        }\n\n        var trace6 = {\n            x: dates,\n            y: polInv75,\n            name: \"$75,000 and over\",\n            mode: 'markers',\n            type: 'scatter'\n        };\n\n        var trace7 = {\n            x: dates,\n            y: polInv50to75,\n            name: \"$50,000 to $74,999\",\n            mode: 'markers',\n            type: 'scatter'\n        };\n\n        var trace8 = {\n            x: dates,\n            y: polInv20to25,\n            name: \"$20,000 to $24,999\",\n            mode: 'markers',\n            type: 'scatter'\n        };\n\n        var trace9 = {\n            x: dates,\n            y: polInv10to13,\n            name: \"$10,000 to $12,499\",\n            mode: 'markers',\n            type: 'scatter'\n        };\n\n        // var trace7 = {\n        //     x: dates,\n        //     y: polNotInv,\n        //     name: 'Police Not Involved',\n        //     type: 'bar'\n        // };\n\n        return (\n            <div>\n                <MenuBar/>\n                <div>\n                    <Plot\n                        data={[ trace1, trace2, trace3, trace4\n                        ]}\n                        layout={ {width: 1200, height: 600, title: 'Weapon Use by Income Bracket', barmode: \"stack\", yaxis: {automargin: true} }}\n                    />\n                </div>\n                <div>\n                    <Plot\n                        data={[ propTrace\n                        ]}\n                        layout={ {width: 1200, height: 600, title: 'Proportion of Criminals Unemployed', yaxis: {automargin: true} }}\n                    />\n                </div>\n                <div>\n                <Plot\n                    data={data}\n                    layout={ {width: 1200, height: 600, title: 'Month Where Specific Crimes are Committed Most'} } />\n                </div>\n                <div>\n                <Plot\n                    data={data2}\n                    layout={ {width: 1200, height: 600, title: 'Months per Year with Most Crimes'} } />\n                </div>\n                <div>\n                    <Plot\n                        data={[ trace6, trace7, trace8, trace9\n                        ]}\n                        layout={ {width: 1200, height: 600, title: 'Police Involvation Rate over Time'}}\n                    />\n                </div>\n          </div>\n        )\n    }\n}\n\nexport default VisualizationPage\n\n"]},"metadata":{},"sourceType":"module"}