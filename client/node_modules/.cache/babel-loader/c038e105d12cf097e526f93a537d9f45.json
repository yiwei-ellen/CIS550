{"ast":null,"code":"var _jsxFileName = \"/Users/rwu/Desktop/2022 spring/CIS 550/NCVS_project/client/src/pages/Visualization.js\";\nimport React from 'react';\nimport Plot from 'react-plotly.js';\nimport { Form, FormInput, FormGroup, Button, Card, CardBody, CardTitle, Progress } from \"shards-react\";\nimport { FlexibleXYPlot, XAxis, YAxis, VerticalGridLines, HorizontalGridLines, VerticalBarSeries, VerticalBarSeriesCanvas, DiscreteColorLegend } from 'react-vis';\nimport { format } from 'd3-format';\nimport MenuBar from '../components/MenuBar';\nimport { Table, Pagination, Row, Col, Divider } from 'antd';\nimport { getVisualization1 } from '../fetcher';\nimport { relJobVictim } from '../fetcher';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Column,\n  ColumnGroup\n} = Table;\nconst wideFormat = format('.3r');\n\nclass VisualizationPage extends React.Component {\n  constructor(props) {\n    super(props); //initial states setup\n\n    this.state = {\n      useCanvas: false,\n      visualization1Results: [],\n      visualization2Results: []\n    };\n  }\n\n  componentDidMount() {\n    getVisualization1().then(res => {\n      this.setState({\n        visualization1Results: res.results\n      });\n    });\n    relJobVictim().then(res => {\n      this.setState({\n        visualization2Results: res.results\n      });\n    });\n  }\n\n  render() {\n    const {\n      useCanvas\n    } = this.state;\n    const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\n    var array = [];\n    console.log(this.state.visualization1Results);\n    var xValues = [];\n    var t1 = [];\n    var t2 = [];\n    var t3 = [];\n    var t4 = [];\n\n    for (var i = 0; i < this.state.visualization1Results.length; i++) {\n      var item = this.state.visualization1Results[i];\n      xValues.push(item.Income_bracket);\n      t1.push(item.Weapon_involved);\n      t2.push(item.No_weapon_involved);\n      t3.push(item.Do_not_know);\n      t4.push(item.Others);\n    }\n\n    var trace1 = {\n      x: xValues,\n      y: t1,\n      name: 'weapon involved',\n      type: 'bar'\n    };\n    var trace2 = {\n      x: xValues,\n      y: t2,\n      name: 'No weapon involved',\n      type: 'bar'\n    };\n    var trace3 = {\n      x: xValues,\n      y: t3,\n      name: 'Do_not_know',\n      type: 'bar'\n    };\n    var trace4 = {\n      x: xValues,\n      y: t4,\n      name: 'Other',\n      type: 'bar'\n    };\n    var years = [];\n    var prop = [];\n\n    for (var i = 0; i < this.state.visualization2Results.length; i++) {\n      var item = this.state.visualization2Results[i];\n      years.push(item.Year);\n      prop.push(item.Proportion);\n    }\n\n    var propTrace = {\n      x: years,\n      y: prop,\n      name: 'Do_not_know',\n      type: 'bar'\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(MenuBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: [trace1, trace2, trace3, trace4],\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Weapon Use by Income Bracket',\n            barmode: \"stack\",\n            yaxis: {\n              automargin: true\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Plot, {\n          data: [propTrace],\n          layout: {\n            width: 1200,\n            height: 600,\n            title: 'Proportion of Criminals Unemployed',\n            yaxis: {\n              automargin: true\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default VisualizationPage;","map":{"version":3,"sources":["/Users/rwu/Desktop/2022 spring/CIS 550/NCVS_project/client/src/pages/Visualization.js"],"names":["React","Plot","Form","FormInput","FormGroup","Button","Card","CardBody","CardTitle","Progress","FlexibleXYPlot","XAxis","YAxis","VerticalGridLines","HorizontalGridLines","VerticalBarSeries","VerticalBarSeriesCanvas","DiscreteColorLegend","format","MenuBar","Table","Pagination","Row","Col","Divider","getVisualization1","relJobVictim","Column","ColumnGroup","wideFormat","VisualizationPage","Component","constructor","props","state","useCanvas","visualization1Results","visualization2Results","componentDidMount","then","res","setState","results","render","BarSeries","array","console","log","xValues","t1","t2","t3","t4","i","length","item","push","Income_bracket","Weapon_involved","No_weapon_involved","Do_not_know","Others","trace1","x","y","name","type","trace2","trace3","trace4","years","prop","Year","Proportion","propTrace","width","height","title","barmode","yaxis","automargin"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Plot from 'react-plotly.js';\nimport { Form, FormInput, FormGroup, Button, Card, CardBody, CardTitle, Progress } from \"shards-react\";\n\n\nimport {\n    FlexibleXYPlot,\n    XAxis,\n    YAxis,\n    VerticalGridLines,\n    HorizontalGridLines,\n    VerticalBarSeries,\n    VerticalBarSeriesCanvas,\n    DiscreteColorLegend\n  } from 'react-vis';\n\nimport { format } from 'd3-format';\nimport MenuBar from '../components/MenuBar';\n\n\nimport {\n    Table,\n    Pagination,\n    Row,\n    Col,\n    Divider,\n\n} from 'antd'\n\nimport { getVisualization1 } from '../fetcher'\nimport { relJobVictim } from '../fetcher'\n\n\nconst { Column, ColumnGroup } = Table;\nconst wideFormat = format('.3r');\n\n\nclass VisualizationPage extends React.Component {\n    constructor(props) {\n        super(props)\n        //initial states setup\n        this.state = {\n            useCanvas : false,\n            visualization1Results: [],\n            visualization2Results: []\n\n        }\n\n    }\n\n    componentDidMount() {\n        getVisualization1().then(res => {\n            this.setState({ visualization1Results: res.results })\n        })\n        relJobVictim().then(res => {\n            this.setState({ visualization2Results: res.results })\n        })\n        \n    }\n\n\n    render() {\n        \n\n        const {useCanvas} = this.state;\n        const BarSeries = useCanvas ? VerticalBarSeriesCanvas : VerticalBarSeries;\n        var array = [];\n        console.log(this.state.visualization1Results);\n\n        var xValues = [];\n        var t1 = [];\n        var t2 = [];\n        var t3 = [];\n        var t4 = [];\n        \n        for (var i = 0; i < this.state.visualization1Results.length; i++) {\n            var item = this.state.visualization1Results[i];\n            xValues.push(item.Income_bracket);\n            t1.push(item.Weapon_involved);\n            t2.push(item.No_weapon_involved);\n            t3.push(item.Do_not_know);\n            t4.push(item.Others);\n        }\n\n        var trace1 = {\n            x:xValues,\n            y: t1,\n            name: 'weapon involved',\n            type: 'bar'\n        } ;\n\n        var trace2 = {\n            x:xValues,\n            y: t2,\n            name: 'No weapon involved',\n            type: 'bar'\n        };\n\n        var trace3 = {\n            x:xValues,\n            y: t3,\n            name: 'Do_not_know',\n            type: 'bar'\n        };\n\n        var trace4 = {\n            x: xValues,\n            y: t4,\n            name: 'Other',\n            type: 'bar'\n        };\n\n        var years = [];\n        var prop = [];\n        \n        for (var i = 0; i < this.state.visualization2Results.length; i++) {\n            var item = this.state.visualization2Results[i];\n            years.push(item.Year);\n            prop.push(item.Proportion);\n        }\n\n        var propTrace = {\n            x: years,\n            y: prop,\n            name: 'Do_not_know',\n            type: 'bar'\n        };\n\n        return (\n            <div>\n                <MenuBar/>\n                <div>\n                    <Plot\n                        data={[ trace1, trace2, trace3, trace4\n                        ]}\n                        layout={ {width: 1200, height: 600, title: 'Weapon Use by Income Bracket', barmode: \"stack\", yaxis: {automargin: true} }}\n                    />\n                </div>\n                <div>\n                    <Plot\n                        data={[ propTrace\n                        ]}\n                        layout={ {width: 1200, height: 600, title: 'Proportion of Criminals Unemployed', yaxis: {automargin: true} }}\n                    />\n                </div>\n          </div>\n        )\n    }\n}\n\nexport default VisualizationPage\n\n"]},"metadata":{},"sourceType":"module"}